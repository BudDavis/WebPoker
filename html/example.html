<!doctype html>
<html>
  <meta charset="utf-8">
<head>
  <title>CSE3310 Websocket Example</title>
</head>
<body>
  <p> this is an example to show how websockets work for a class demonstration.</p>
  <p>name: <input id="send_text " type="text">
           <input type="button" name="send_button" value="send" onclick="send()"></p>
</body>
</html>
<script>
 
var connection = null;

var serverUrl;
serverUrl = "ws://localhost:8887";

connection = new WebSocket(serverUrl, "json");
connection.onopen = function(evt) {
console.log("open");
}   

connection.onmessage = function(evt) {
  console.log("***ONMESSAGE");
  var f = document.getElementById("chatbox").contentDocument;
  var text = "";
  var msg = JSON.parse(evt.data);
  console.log("Message received: ");
  console.dir(msg);
     
  document.getElementById("userlistbox").innerHTML = ul;
     
}


function send() {
  console.log("send");
  var msg = {
    text: document.getElementById("send_text").value,
  };
  connection.send(JSON.stringify(msg));
  //document.getElementById("text").value = "";
}

</script>